 
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

Aiogram_run.py
–§–∞–π–ª –∑–∞–ø—É—Å–∫–∞!!
# –ò–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–æ–¥—É–ª–µ–π
import asyncio  # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
import logging  # –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
from create_bot import bot, dp  # –ò–º–ø–æ—Ä—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∏–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –º–æ–¥—É–ª—è
from handlers.start import start_router  # –ò–º–ø–æ—Ä—Ç —Ä–æ—É—Ç–µ—Ä–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è INFO
logger = logging.getLogger(__name__)  # –°–æ–∑–¥–∞–µ–º –ª–æ–≥–≥–µ—Ä –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–æ–¥—É–ª—è

async def main():
"""
–ì–ª–∞–≤–Ω–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞.
"""
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤
dp.include_router(start_router)  # –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä –∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É

try:
# –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞ (–∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)
await bot.delete_webhook(drop_pending_updates=True)

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–ø—Ä–æ—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ Telegram –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
await dp.start_polling(bot)

except Exception as e:
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å –∑–∞–ø–∏—Å—å—é –≤ –ª–æ–≥
logger.error(f"An error occurred: {e}")

finally:
# –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–∏ –±–æ—Ç–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã
await bot.session.close()

if __name__ == "__main__":
# –ó–∞–ø—É—Å–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ event loop
asyncio.run(main())


problem_handler.py
def get_problem_description(adapter_type: str, problem_index: str) -> str:
   # –°–ª–æ–≤–∞—Ä—å —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞
    problems = {
        "adapter_chademo_gbt": [
            "–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–∏–º –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–æ–º",
            "–û–±—Ä—ã–≤ –∑–∞—Ä—è–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏",
            "–ù–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞—Ä—è–¥–Ω–∞—è —Å–µ—Å—Å–∏—è",
            "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ",
            "–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞"
        ],
        "adapter_ccs2_gbt": [
            "–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–∏–º –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–æ–º",
            "–û–±—Ä—ã–≤ –∑–∞—Ä—è–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏",
            "–ù–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞—Ä—è–¥–Ω–∞—è —Å–µ—Å—Å–∏—è",
            "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ",
            "–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞"
        ],
        "adapter_chademo_ccs": [
            "–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–∏–º –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–æ–º",
            "–û–±—Ä—ã–≤ –∑–∞—Ä—è–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏",
            "–ù–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞—Ä—è–¥–Ω–∞—è —Å–µ—Å—Å–∏—è",
            "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ",
            "–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞"
        ],
        "adapter_gbt_ccs2": [
            "–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–∏–º –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–æ–º",
            "–û–±—Ä—ã–≤ –∑–∞—Ä—è–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏",
            "–ù–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞—Ä—è–¥–Ω–∞—è —Å–µ—Å—Å–∏—è",
            "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ",
            "–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞"
        ]
    }
    # –°–ª–æ–≤–∞—Ä—å —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –ø—Ä–æ–±–ª–µ–º
    problem_descriptions = {
        "–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–∏–º –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–æ–º": (
            "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ä–∞–∑—ä—ë–º—ã ‚Äì –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∞—à–µ–π –∑–∞—Ä—è–¥–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ –∏ —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—è.\n"
            "–ü–æ–¥–∫–ª—é—á–∏—Ç–µ ‚Äì –í—Å—Ç–∞–≤—å—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ –≤ —Ä–∞–∑—ä—ë–º –∞–≤—Ç–æ–º–æ–±–∏–ª—è, –∑–∞—Ç–µ–º –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–∞–±–µ–ª—å –æ—Ç —Å—Ç–∞–Ω—Ü–∏–∏.\n"
            "–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞—Ä—è–¥–∫—É ‚Äì –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å (–∫–∞—Ä—Ç–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ) –∏ –Ω–∞—á–Ω–∏—Ç–µ –∑–∞—Ä—è–¥–∫—É.\n"
            "–ó–∞–≤–µ—Ä—à–∏—Ç–µ ‚Äì –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞—Ä—è–¥–∫—É, –æ—Ç–∫–ª—é—á–∏—Ç–µ –∫–∞–±–µ–ª—å, –∑–∞—Ç–µ–º —Å–Ω–∏–º–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫.\n"
            "–í–∞–∂–Ω–æ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∏, –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π—Ç–µ –∏—Ö –∏ —Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Å—É—Ö–æ–º –º–µ—Å—Ç–µ."
        ),
        "–û–±—Ä—ã–≤ –∑–∞—Ä—è–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏": (
            "–ï—Å–ª–∏ –æ–±—Ä—ã–≤ –∑–∞—Ä—è–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:\n"
            "1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è ‚Äì –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ –∏ –∫–∞–±–µ–ª—å –ø–ª–æ—Ç–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã.\n"
            "2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç–∞–Ω—Ü–∏—é ‚Äì –ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞—Ä—è–¥–Ω—É—é —Å—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é.\n"
            "3. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Äì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –≤—ã –ø—Ä–æ—à–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–∫–∞—Ä—Ç–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ–ø–ª–∞—Ç–∞).\n"
            "4. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ‚Äì –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—à –∞–≤—Ç–æ –∏ —Å—Ç–∞–Ω—Ü–∏—é.\n"
            "5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∫–∞–±–µ–ª—å ‚Äì –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–∞–º–æ–º –∑–∞—Ä—è–¥–Ω–æ–º –∫–∞–±–µ–ª–µ.\n"
            "6. –ü–µ—Ä–µ–∑apustite —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—å ‚Äì –ò–Ω–æ–≥–¥–∞ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –∞–≤—Ç–æ.\n"
            "7. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ‚Äì –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞—Ä—è–¥–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏."
        ),
        "–ù–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∑–∞—Ä—è–¥–Ω–∞—è —Å–µ—Å—Å–∏—è": (
            "–ï—Å–ª–∏ –∑–∞—Ä—è–¥–Ω–∞—è —Å–µ—Å—Å–∏—è –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:\n"
            "1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è ‚Äì –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ –∏ –∫–∞–±–µ–ª—å –ø–ª–æ—Ç–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã.\n"
            "2. –ü–µ—Ä–µ–∑ag—Ä—É–∑ite —Å—Ç–∞–Ω—Ü–∏—é ‚Äì –ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞—Ä—è–¥–Ω—É—é —Å—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é.\n"
            "3. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Äì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –≤—ã –ø—Ä–æ—à–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–∫–∞—Ä—Ç–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ–ø–ª–∞—Ç–∞).\n"
            "4. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ‚Äì –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—à –∞–≤—Ç–æ –∏ —Å—Ç–∞–Ω—Ü–∏—é.\n"
            "5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∫–∞–±–µ–ª—å ‚Äì –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–∞–º–æ–º –∑–∞—Ä—è–¥–Ω–æ–º –∫–∞–±–µ–ª–µ.\n"
            "6. –ü–µ—Ä–µ–∑apustite —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—å ‚Äì –ò–Ω–æ–≥–¥–∞ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –∞–≤—Ç–æ.\n"
            "7. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ‚Äì –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞—Ä—è–¥–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏."
        ),
        "–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ": (
            "–°–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ:\n"
            "1. ABB\n"
            "2. Punkt-e\n"
            "3. –≠–Ω–µ—Ä–≥–∏—è –ú–æ—Å–∫–≤—ã (50 –∏ 60–∫–≤—Ç, 80–∫–≤—Ç)\n"
            "4. –ü–∞—Ä—É—Å\n"
            "5. NSP\n"
            "6. Pandora\n"
            "7. –ü—Ä–æ–º—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞\n"
            "8. –†—É—Å–≥–∏–¥—Ä–æ\n"
            "9. Rosseti\n"
            "10. Malanka (–ë–µ–ª–∞—Ä—É—Å—å)\n"
            "–ò –¥—Ä—É–≥–∏–µ..."
        )
    }
    # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø–æ–∏—Å–∫ –æ–ø–∏—Å–∞–Ω–∏—è
    problem_text = problems.get(adapter_type, [])[int(problem_index)]
    return problem_descriptions.get(problem_text, "–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É, –∏ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–æ–∂–µ–º –≤–∞–º:")


create_bot.py
# –ò–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–æ–¥—É–ª–µ–π
import logging  # –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
from aiogram import Bot, Dispatcher  # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã aiogram
from aiogram.client.default import DefaultBotProperties  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
from aiogram.enums import ParseMode  # –†–µ–∂–∏–º—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
from aiogram.fsm.storage.memory import MemoryStorage  # –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏
from decouple import config  # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
from apscheduler.schedulers.asyncio import AsyncIOScheduler  # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (INFO –∏ –≤—ã—à–µ)
logger = logging.getLogger(__name__)  # –°–æ–∑–¥–∞–Ω–∏–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–æ–¥—É–ª—è

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞
bot = Bot(
    token=config('TOKEN'),  # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    default=DefaultBotProperties(
        parse_mode=ParseMode.HTML  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ HTML-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    )
)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
dp = Dispatcher(
    storage=MemoryStorage()  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è FSM
)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–¥–∞—á
scheduler = AsyncIOScheduler()  # –°–æ–∑–¥–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã
__all__ = ['bot', 'dp', 'scheduler']  # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API –º–æ–¥—É–ª—è


Start.py
# –ò–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
from aiogram import Bot, Router, F  # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã aiogram
from aiogram.filters import CommandStart  # –§–∏–ª—å—Ç—Ä –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /start
from aiogram.types import Message, CallbackQuery, InlineKeyboardButton, InlineKeyboardMarkup  # –¢–∏–ø—ã Telegram –æ–±—ä–µ–∫—Ç–æ–≤
from aiogram.fsm.context import FSMContext  # –ö–æ–Ω—Ç–µ–∫—Å—Ç –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
from aiogram.fsm.state import StatesGroup, State  # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è FSM
from create_bot import bot  # –ò–º–ø–æ—Ä—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞
from . import problem_handler  # –ú–æ–¥—É–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–±–ª–µ–º
from aiogram.types import FSInputFile  # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton  # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞
start_router = Router()

# ID –≥—Ä—É–ø–ø—ã –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
GROUP_ID = -4647347489

# –ö–ª–∞—Å—Å —Å–æ—Å—Ç–æ—è–Ω–∏–π FSM
class ProblemSelection(StatesGroup):
    waiting_for_problem = State()  # –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–±–ª–µ–º—ã
    waiting_for_custom_problem = State()  # –û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

# –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞ (4 –∫–Ω–æ–ø–∫–∏ –≤ 2 —Ä—è–¥–∞)
menu = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="CHAdeMO - GB/T", callback_data="adapter_chademo_gbt"),
     InlineKeyboardButton(text="CCS2 - GB/T", callback_data="adapter_ccs2_gbt")],
    [InlineKeyboardButton(text="CHAdeMO - CCS", callback_data="adapter_chademo_ccs"),
     InlineKeyboardButton(text="GB/T - CCS2", callback_data="adapter_gbt_ccs2")]
])

# –ì–ª–∞–≤–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–æ–π —Å—Ç–∞—Ä—Ç–∞
main_keyboard = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="üöÄ –°—Ç–∞—Ä—Ç")]  # –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞
    ],
    resize_keyboard=True  # –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
@start_router.message(F.text == "üöÄ –°—Ç–∞—Ä—Ç")
@start_router.message(CommandStart())
async def cmd_start(message: Message):
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞, –≤—ã–≤–æ–¥ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞"""
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –±–æ—Ç Xtronik...",  # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        reply_markup=menu  # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ–Ω—é –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
    )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞
@start_router.callback_query(F.data.startswith("adapter_"))
async def handle_adapter_selection(callback: CallbackQuery, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∞–¥–∞–ø—Ç–µ—Ä–∞"""
    await state.update_data(adapter=callback.data)  # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ FSM
    await callback.message.edit_text(  # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã:",
        reply_markup=problems_menu()  # –ü–æ–∫–∞–∑ –º–µ–Ω—é –ø—Ä–æ–±–ª–µ–º
    )
    await state.set_state(ProblemSelection.waiting_for_problem)

# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–µ–Ω—é –ø—Ä–æ–±–ª–µ–º
def problems_menu() -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å —Å–ø–∏—Å–∫–æ–º –ø—Ä–æ–±–ª–µ–º"""
    problems = [...]  # –°–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º
    buttons = [
        [InlineKeyboardButton(...)]  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫
        for i, problem in enumerate(problems)
    ]
    buttons.append([InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back_to_adapters")])
    return InlineKeyboardMarkup(inline_keyboard=buttons)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
@start_router.callback_query(F.data == "back_to_adapters")
async def back_to_adapters(callback: CallbackQuery, state: FSMContext):
    """–í–æ–∑–≤—Ä–∞—Ç –∫ –≤—ã–±–æ—Ä—É –∞–¥–∞–ø—Ç–µ—Ä–∞"""
    await state.clear()  # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
    await callback.message.edit_text(...)  # –ü–æ–∫–∞–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–µ–Ω—é

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–±–ª–µ–º—ã
@start_router.callback_query(ProblemSelection.waiting_for_problem)
async def handle_problem_selection(callback: CallbackQuery, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã"""
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ FSM
    data = await state.get_data()
    adapter_type = data.get("adapter")

    # –í–∞–ª–∏–¥–∞—Ü–∏—è callback –¥–∞–Ω–Ω—ã—Ö
    if callback.data == "cancel": ...  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã
    if not callback.data.isdigit(): ...  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞

    problem_index = int(callback.data)
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã
    if problem_index == 4: 
        await state.set_state(ProblemSelection.waiting_for_custom_problem)
        return

    # –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
    problem_description = problem_handler.get_problem_description(...)

    # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è CCS2-GBT
    if adapter_type == "adapter_ccs2_gbt" and problem_index == 2:
        problem_description += ...  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        animation = FSInputFile("media/gifka.gif")  # –ó–∞–≥—Ä—É–∑–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
        await bot.send_animation(...)  # –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞

    # –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    await callback.message.answer(problem_description)

    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
    await bot.send_message(
        GROUP_ID,
        f"üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ...\n"  # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        f"üîå –ê–¥–∞–ø—Ç–µ—Ä: ...\n"
        f"‚ùó –ü—Ä–æ–±–ª–µ–º–∞: ..."
    )

    await state.clear()  # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
@start_router.message(ProblemSelection.waiting_for_custom_problem)
async def handle_custom_problem(message: Message, state: FSMContext):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã"""
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–µ–∫—Å—Ç–∞
    data = await state.get_data()
    custom_problem = message.text

    # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    await message.answer("–°–ø–∞—Å–∏–±–æ!...")
    await bot.send_message(GROUP_ID, ...)

    await state.clear()  # –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å]
  ‚îÇ
  ‚îú‚îÄ‚îÄ /start ‚Üí –ü–æ–∫–∞–∑ –º–µ–Ω—é –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
  ‚îÇ
  ‚îú‚îÄ‚îÄ –í—ã–±–æ—Ä –∞–¥–∞–ø—Ç–µ—Ä–∞ ‚Üí –ü–æ–∫–∞–∑ –º–µ–Ω—é –ø—Ä–æ–±–ª–µ–º
  ‚îÇ   ‚îÇ
  ‚îÇ   ‚îú‚îÄ‚îÄ –í—ã–±–æ—Ä –ø—Ä–æ–±–ª–µ–º—ã ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
  ‚îÇ   ‚îÇ
  ‚îÇ   ‚îî‚îÄ‚îÄ –ù–∞–∑–∞–¥ ‚Üí –í–æ–∑–≤—Ä–∞—Ç –∫ –∞–¥–∞–ø—Ç–µ—Ä–∞–º
  ‚îÇ
  ‚îî‚îÄ‚îÄ –ö–∞—Å—Ç–æ–º–Ω—ã–π –≤–≤–æ–¥ ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ


.env
—Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
TOKEN=7523000514:AAFA1TH-sCRC4eThknPW-jeDwHWsgjCWk5I
ADMINS=00000000,000000001
PG_LINK=postgresql://USER_LOGIN:USER_PASSWORD@HOST_API:PORT/NAME_BD





Dockerfile
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ Python
FROM python:3.9-slim

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
COPY . /app

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN pip install --no-cache-dir -r requirements.txt

# –£–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CMD ["python", "aiogram_run.py"]
COPY media/gifka.gif /app/gifka.gif
COPY media /app/media



Requirements.txt
asyncpg
aiogram
APScheduler
python-decouple


-–°–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–ª–∏–æ—Ç–µ–∫






–¢–∞–∫ –∂–µ –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞—é —Å—Å—ã–ª–∫—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ github:
https://github.com/hotlole/Xtronik-telegram-bot
